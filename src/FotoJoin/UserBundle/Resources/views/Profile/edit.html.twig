{% extends "FotoJoinControlPanelBundle:Base:layout.html.twig" %}

{% trans_default_domain 'FotoJoinUserBundle' %}

{% block title %}{{ 'profile.edit.title'|trans }}{% endblock %}

{% block controlpanel %}

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">{{ icon('edit fa-fw') }}{{ 'profile.edit.title'|trans }}</h1>
            <div class="panel panel-default">
                <div class="panel-body">
                    {{ form_start(form, { 'style': 'horizontal', 'action': path('fos_user_profile_edit'), 'attr': { 'class': 'fos_user_profile_edit' } }) }}
                    <h3>{{ icon('user fa-fw') }}&nbsp;Información Personal</h3>
                    {{ form_row(form.name) }}
                    {{ form_row(form.birthdate) }}
                    {{ form_row(form.profilephoto) }}
                    {{ form_row(form.publiccontact) }}
                    <hr>
                    <h3>{{ icon('map-marker fa-fw') }}&nbsp;Mis Ciudades de Cobertura</h3>
                    {{ form_row(form.city1) }}
                    {{ form_row(form.city2) }}
                    {{ form_row(form.city3) }}
                {% if is_granted('ROLE_AUTHOR') %}
                    <hr>
                    <h3>{{ icon('camera fa-fw') }}&nbsp;Información Fotográfica</h3>
                    {{ form_row(form.level) }}
{#}
                    {{ form_row(form.exigency) }}
{#}
                    {{ form_row(form.description) }}
                    {{ form_row(form.facebookshare) }}
                {% endif %}
                    <div class="form-group"><div class="col-lg-offset-3 col-lg-9">
                        <button type="submit" class="btn btn-primary">{{ icon('save') }}&nbsp;{{ 'profile.edit.submit'|trans }}</button>
                    </div></div>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>

{% endblock %}
{#}
{% block javascript %}
    <script type="text/javascript">
    var optionsCountry = {
        enableClickableOptGroups: true,
        enableCollapsibleOptGroups: true,
        maxHeight: 300,
        enableFiltering: true,
        enableCaseInsensitiveFiltering: true,
        filterPlaceholder: 'Buscar País',
        buttonWidth: '100%',
        onChange: function() {
            var $form = $('form[name=fotojoin_user_profile_form]');
            $.ajax({
                url: $form.attr('action'),
                type: $form.attr('method'),
                data: $form.serializeArray(),
                success: function(html) {
                    $('select[name=fotojoin_user_profile_form_city1]').multiselect('destroy');
                    $('select[name=fotojoin_user_profile_form_city1]').replaceWith($(html).find('select[name=fotojoin_user_profile_form_city1]'));
                    $('select[name=fotojoin_user_profile_form_city1]').multiselect(optionsCountry);
                }
            });
        }
    };
    var optionsCity = {
        enableClickableOptGroups: true,
        enableCollapsibleOptGroups: true,
        maxHeight: 300,
        enableFiltering: true,
        enableCaseInsensitiveFiltering: true,
        filterPlaceholder: 'Buscar Ciudad',
        buttonWidth: '100%',
    };
    $('#fotojoin_user_profile_form_country').multiselect(optionsCountry);
    $('#fotojoin_user_profile_form_city1').multiselect(optionsCity);
    $('#fotojoin_user_profile_form_city2').multiselect(optionsCity);
    $('#fotojoin_user_profile_form_city3').multiselect(optionsCity);
    </script>
{% endblock %}
{#}
